<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>【Linux】sed命令详解 - Damion&#39;s Blog</title><meta name="Description" content="Damon&#39;s Blog"><meta property="og:title" content="【Linux】sed命令详解" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/linux_sed/" /><meta property="og:image" content="http://example.org/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-05T17:52:47&#43;08:00" />
<meta property="article:modified_time" content="2020-10-05T17:52:47&#43;08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/logo.png"/>

<meta name="twitter:title" content="【Linux】sed命令详解"/>
<meta name="twitter:description" content=""/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/linux_sed/" /><link rel="prev" href="http://example.org/mysql-optimizer/" /><link rel="next" href="http://example.org/linux-ya-suo-he-gui-dang/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "【Linux】sed命令详解",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/linux_sed\/"
        },"genre": "posts","keywords": "Linux, sed","wordcount":  1412 ,
        "url": "http:\/\/example.org\/linux_sed\/","datePublished": "2020-10-05T17:52:47+08:00","dateModified": "2020-10-05T17:52:47+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "damion"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Damion&#39;s Blog">Damion&#39;s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/portfolio"> 作品集 </a><a class="menu-item" href="https://github.com/damiony" title="GitHub" rel="noopener noreffer" target="_blank"><i class="fab fa-github fa-fw"></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Damion&#39;s Blog">Damion&#39;s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/portfolio" title="">作品集</a><a class="menu-item" href="https://github.com/damiony" title="GitHub" rel="noopener noreffer" target="_blank"><i class="fab fa-github fa-fw"></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">【Linux】sed命令详解</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>damion</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/linux/"><i class="far fa-folder fa-fw"></i>Linux</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp; 发布于 <time datetime="2020-10-05">2020-10-05</time>&nbsp;
                </div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#sed编辑器">sed编辑器</a></li>
    <li><a href="#options的使用示例">options的使用示例</a>
      <ul>
        <li><a href="#1-常规命令">1. 常规命令</a></li>
        <li><a href="#2-使用-e">2. 使用<code>-e</code></a></li>
        <li><a href="#3-使用-f">3. 使用<code>-f</code></a></li>
        <li><a href="#4-使用-n">4. 使用<code>-n</code></a></li>
      </ul>
    </li>
    <li><a href="#script的基本语法">script的基本语法</a>
      <ul>
        <li><a href="#1-替换s">1. 替换<code>s</code></a></li>
        <li><a href="#2-行寻址">2. 行寻址</a></li>
        <li><a href="#3-命令组合">3. 命令组合</a></li>
        <li><a href="#4-删除d">4. 删除<code>d</code></a></li>
        <li><a href="#5-插入i">5. 插入<code>i</code></a></li>
        <li><a href="#6-追加a">6. 追加<code>a</code></a></li>
        <li><a href="#7-修改c">7. 修改<code>c</code></a></li>
        <li><a href="#8-转换y">8. 转换<code>y</code></a></li>
        <li><a href="#9-打印命令p">9. 打印命令<code>p</code></a></li>
        <li><a href="#10-打印行号">10. 打印行号<code>=</code></a></li>
        <li><a href="#11-列出l">11. 列出<code>l</code></a></li>
        <li><a href="#12-写入命令w">12. 写入命令<code>w</code></a></li>
        <li><a href="#13-读取数据r">13. 读取数据<code>r</code></a></li>
      </ul>
    </li>
    <li><a href="#sed-script进阶语法">sed script进阶语法</a>
      <ul>
        <li><a href="#1-模式空间和保持空间">1. 模式空间和保持空间</a></li>
        <li><a href="#2-单行数据的next命令">2. 单行数据的next命令</a></li>
        <li><a href="#3-多行数据的next命令">3. 多行数据的next命令</a></li>
        <li><a href="#4-多行删除命令d">4. 多行删除命令D</a></li>
        <li><a href="#5-多行打印命令p">5. 多行打印命令P</a></li>
        <li><a href="#6-排除命令">6. 排除命令</a></li>
        <li><a href="#7-分支命令">7. 分支命令</a></li>
        <li><a href="#8-测试命令">8. 测试命令</a></li>
        <li><a href="#9-匹配模式">9. 匹配模式</a></li>
      </ul>
    </li>
    <li><a href="#sed-示例">sed 示例</a>
      <ul>
        <li><a href="#1-反序输出文本">1. 反序输出文本</a></li>
        <li><a href="#2-加倍行距">2. 加倍行距</a></li>
        <li><a href="#3-给文件的行编号">3. 给文件的行编号</a></li>
        <li><a href="#4-打印末尾行">4. 打印末尾行</a></li>
        <li><a href="#5-删除文本中的连续空白行">5. 删除文本中的连续空白行</a></li>
        <li><a href="#6-删除开头空白行">6. 删除开头空白行</a></li>
        <li><a href="#7-删除结尾空白行">7. 删除结尾空白行</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="sed编辑器">sed编辑器</h2>
<p>sed可以根据命令来编辑数据流，大致处理流程为：</p>
<ol>
<li>从输入读取一行数据。</li>
<li>按照命令对数据进行匹配。</li>
<li>按照命令修改匹配到的数据。</li>
<li>将新的数据输出到STDOUT。</li>
<li>读取下一行数据，并重复上述过程。</li>
<li>数据流读取完毕，则程序终止。</li>
</ol>
<p>sed命令格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sed <span class="o">[</span>options<span class="o">]</span> script file
</code></pre></td></tr></table>
</div>
</div><p>options可以是：</p>
<ul>
<li><code>-e script</code>: 将script中的命令，添加到已有的命令列表。</li>
<li><code>-f file</code>: 将file中指定的命令，添加到已有的命令列表。</li>
<li><code>-n</code>：不输出每一行的处理结果。</li>
</ul>
<p><strong>注意：</strong></p>
<p><code>linux</code>中的sed和<code>mac</code>中的sed，在语法上存在一定差异，本文的测试环境为<code>linux bash4.2</code>。</p>
<h2 id="options的使用示例">options的使用示例</h2>
<p>假设有一个<code>data.txt</code>文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">This is line 1.
This is line 2.
</code></pre></td></tr></table>
</div>
</div><h3 id="1-常规命令">1. 常规命令</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;s/line/number/&#39;</span> data.txt
this is number 1.
this is number 2.
</code></pre></td></tr></table>
</div>
</div><p><code>s/line/number/</code>是指，将line替换成number。</p>
<h3 id="2-使用-e">2. 使用<code>-e</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed -e <span class="s1">&#39;s/line/number/&#39;</span> -e <span class="s1">&#39;s/this/This/&#39;</span> data.txt
This is number 1.
This is number 2.
</code></pre></td></tr></table>
</div>
</div><h3 id="3-使用-f">3. 使用<code>-f</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat script.sed
s/line/number/
s/this/This/

$ sed -f script.sed data.txt
This is number 1.
This is number 2.
</code></pre></td></tr></table>
</div>
</div><h3 id="4-使用-n">4. 使用<code>-n</code></h3>
<p>默认情况下，不论数据行是否满足匹配要求，都会将结果输出。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed -n <span class="s1">&#39;s/This/That/&#39;</span> data.txt <span class="c1"># 不会有任何输出 </span>
</code></pre></td></tr></table>
</div>
</div><h2 id="script的基本语法">script的基本语法</h2>
<h3 id="1-替换s">1. 替换<code>s</code></h3>
<p>可以使用<code>s</code>命令来替换文本，还可以指定替换标记：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">s/pattern/replacement/<span class="o">[</span>flags<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>替换标记是可选的，具体有以下几种：</p>
<ul>
<li>
<p>数字：表明替换第几处匹配的地方，从1开始。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.
this is line 2.

$ sed <span class="s1">&#39;s/is/was/2&#39;</span> data.txt
this was line 1.
this was line 2.
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>g：替换所有匹配的文本。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.
this is line 2.

$ sed <span class="s1">&#39;s/is/*/g&#39;</span> data.txt
th* * line 1.
th* * line 2.
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>p：输出被修改后的行，本质上是输出模式空间的内容。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.
this is line 2.

$ sed <span class="s1">&#39;s/line 1/*/p&#39;</span> data.txt
this is *.
this is *.
this is line 2.

$ sed -n <span class="s1">&#39;s/line 1/*/p&#39;</span> data.txt
this is *.
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>w file：将替换的结果输出到file。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.
this is line 2.

$ sed <span class="s1">&#39;s/line 1/*/w result.txt&#39;</span> data.txt
this is *.
this is line 2.

$ cat result.txt
this is *.
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p>替换命令的分隔符<code>/</code>可以换成其他自定义字符：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.
this is line 2.

$ sed <span class="s1">&#39;s,line,number,&#39;</span> data.txt
this is number 1.
this is number 2.
</code></pre></td></tr></table>
</div>
</div><h3 id="2-行寻址">2. 行寻址</h3>
<p>sed默认作用于所有行，如果想指定行号，命令格式为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>address<span class="o">]</span><span class="nb">command</span>
</code></pre></td></tr></table>
</div>
</div><p>寻址方式有两种。</p>
<ul>
<li>
<p>数字方式。</p>
<p>指定单个行号：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;2s/line/number/&#39;</span> data.txt
this is line 1.
this is number 2.
</code></pre></td></tr></table>
</div>
</div><p>指定地址区间：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;1,2s/line/number/&#39;</span> data.txt
this is number 1.
this is number 2.
</code></pre></td></tr></table>
</div>
</div><p><code>$</code>表示最后一行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;1,$s/line/number/&#39;</span> data.txt
this is number 1.
this is number 2.
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>文本模式。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;/line 2/s/line/*/&#39;</span> data.txt
this is line 1.
this is * 2.
</code></pre></td></tr></table>
</div>
</div><p>文本模式是对模式空间内的文本进行匹配。</p>
<p>并且，文本模式可以使用正则表达式，正则表达式的具体语法此处不做说明。</p>
</li>
</ul>
<h3 id="3-命令组合">3. 命令组合</h3>
<p>如果想执行多条命令，可以使用分号分隔。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;1s/line/number/; 1s/is/*/&#39;</span> data.txt
th* is number 1.
this is line 2.
</code></pre></td></tr></table>
</div>
</div><p>可以将命令写成多行。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;
</span><span class="s1">&gt; 1,$s/line/number/
</span><span class="s1">&gt; 1,$s/is/*/
</span><span class="s1">&gt; &#39;</span> data.txt
th* is number 1.
th* is number 2.
</code></pre></td></tr></table>
</div>
</div><p>也可以使用花括号<code>{}</code>将多条命令组合在一起。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;1,${s/line/number/ ; s/is/*/}&#39;</span> data.txt
th* is number 1.
th* is number 2.
</code></pre></td></tr></table>
</div>
</div><h3 id="4-删除d">4. 删除<code>d</code></h3>
<p>可以使用删除命令<code>d</code>删除指定行，删除时也可以使用行寻址。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;1d&#39;</span> data.txt
this is line 2.
</code></pre></td></tr></table>
</div>
</div><p>使用区间寻址时，第一个匹配处打开删除功能，第二个匹配处关闭删除功能。</p>
<h3 id="5-插入i">5. 插入<code>i</code></h3>
<p>插入命令<code>i</code>会在指定行前增加一个新行。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;[address]i\
</span><span class="s1">new line&#39;</span> data.txt
</code></pre></td></tr></table>
</div>
</div><p>使用插入命令<code>i</code>时，需要保证新行文本和<code>i</code>位于同一行。如果想分成多行书写，需要使用<code>\</code>作为结尾。</p>
<p>如果省略<code>address</code>，则是在每行前增加新行。</p>
<h3 id="6-追加a">6. 追加<code>a</code></h3>
<p>追加命令<code>a</code>会在指定行后增加一个新行。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;[address]a\
</span><span class="s1">new line&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>新行文本的书写规则，同<code>i</code>。</p>
<p>如果省略address，则是在每行后增加新行。</p>
<h3 id="7-修改c">7. 修改<code>c</code></h3>
<p>修改命令<code>c</code>可以修改整行的数据内容。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;2c\
</span><span class="s1">&gt; this is new line 2&#39;</span> data.txt
this is line 1.
this is new line <span class="m">2</span>
</code></pre></td></tr></table>
</div>
</div><p>如果使用区间寻址，c会对整个区间做替换。</p>
<p>如果省略寻址，则对每行数据做修改。</p>
<h3 id="8-转换y">8. 转换<code>y</code></h3>
<p>转换命令<code>y</code>可以对单个字符做一对一映射转换。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>address<span class="o">]</span>y/chars1/chars2/
</code></pre></td></tr></table>
</div>
</div><p><code>chars1</code>和<code>chars2</code>的长度必须一致，<code>chars1</code>中的字符，会被转换为<code>char2</code>中对应的字符。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;y/hijk/HIJK/&#39;</span> data.txt
tHIs Is lIne 1.
tHIs Is lIne 2.
</code></pre></td></tr></table>
</div>
</div><p><code>y</code>是一个全局命令，即替换所有匹配的字符结果。</p>
<h3 id="9-打印命令p">9. 打印命令<code>p</code></h3>
<p>这是小写<code>p</code>。</p>
<p>打印命令p和替换标记p类似，可以打印匹配到的数据行，即打印当前模式空间的所有数据。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed -n <span class="s1">&#39;1p&#39;</span> data.txt
this is line 1.
</code></pre></td></tr></table>
</div>
</div><h3 id="10-打印行号">10. 打印行号<code>=</code></h3>
<p>命令<code>=</code>可以打印被匹配数据在文本中的行号。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;/2/=&#39;</span> data.txt
this is line 1.
<span class="m">2</span>
this is line 2.
</code></pre></td></tr></table>
</div>
</div><h3 id="11-列出l">11. 列出<code>l</code></h3>
<p>列出命令<code>l</code>可以打印匹配数据，包括文本字符和不可打印的转义字符。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed -n <span class="s1">&#39;1l&#39;</span> data.txt
this is line 1.$ <span class="c1"># $是被打印的换行符</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="12-写入命令w">12. 写入命令<code>w</code></h3>
<p><code>w</code>命令可以将匹配数据写入文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>address<span class="o">]</span>w filename
</code></pre></td></tr></table>
</div>
</div><h3 id="13-读取数据r">13. 读取数据<code>r</code></h3>
<p>读取命令<code>r</code>从文件中读取数据，并将文件的所有数据插入到匹配行后面。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>address<span class="o">]</span>r filename
</code></pre></td></tr></table>
</div>
</div><h2 id="sed-script进阶语法">sed script进阶语法</h2>
<p>假设数据文件<code>data.txt</code>为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">this is line 1.
this is line 2.
this is line 3.
this is line 4.
this is line 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="1-模式空间和保持空间">1. 模式空间和保持空间</h3>
<p>sed在执行命令时，会保存待检查的文本。</p>
<p>保存文本时，需要用到两个缓冲区：模式空间和保持空间。</p>
<p>读到的数据保存在模式空间，而保持空间主要起辅助作用。</p>
<p>与缓冲区有关的命令如下：</p>
<ul>
<li>h: 将模式空间复制到保持空间。</li>
<li>H: 将模式空间追加到保持空间。</li>
<li>g: 将保持空间复制到模式空间。</li>
<li>G: 将保持空间追加到模式空间。</li>
<li>x: 交换模式空间和保持空间的内容。</li>
</ul>
<h3 id="2-单行数据的next命令">2. 单行数据的next命令</h3>
<p>单行<code>next</code>命令会将匹配数据的下一行，移到sed的模式空间，移动前会清空模式空间。</p>
<p>单行命令是<code>n</code>。</p>
<p>注意，如果不存在下一行数据，则模式空间会为空。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed -n <span class="s1">&#39;/line 4/{n; p}&#39;</span> data.txt
this is line 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="3-多行数据的next命令">3. 多行数据的next命令</h3>
<p>多行<code>next</code>命令，会以追加的方式，将匹配行的下一行添加到模式空间。并且，sed会将模式空间中的数据当成一行处理。</p>
<p>多行命令是<code>N</code>。</p>
<p>注意，如果不存在下一行数据，则模式空间会为空。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed -n <span class="s1">&#39;/line 3/{N; p}&#39;</span> data.txt
this is line 3.
this is line 4.
</code></pre></td></tr></table>
</div>
</div><p>当要匹配的数据在多行中时，这种语法就能很好的发挥作用。</p>
<h3 id="4-多行删除命令d">4. 多行删除命令D</h3>
<p>多行删除命令<code>D</code>，会删除模式空间中的第一行。</p>
<p>注意，<code>d</code>会删除模式空间中的所有数据。</p>
<h3 id="5-多行打印命令p">5. 多行打印命令P</h3>
<p>多行打印命令（大写<code>P</code>）会打印模式空间中的第一行。</p>
<p>注意，小写的<code>p</code>会打印模式空间中的所有数据。</p>
<h3 id="6-排除命令">6. 排除命令</h3>
<p>排除命令<code>!</code>用于将后续命令作用于非匹配行。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed -n <span class="s1">&#39;1,2!p&#39;</span> data.txt
this is line 3.
this is line 4.
this is line 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="7-分支命令">7. 分支命令</h3>
<p>分支命令b可以用来改变命令的执行流程。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>address<span class="o">]</span>b <span class="o">[</span>label<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>address用于寻址，label制定了跳转位置，如果省略label，则跳转到命令脚本的结尾。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sed <span class="s1">&#39;3b ; s/this is line/*/&#39;</span> data.txt
* 1.
* 2.
this is line 3.
* 4.
* 5.
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sed <span class="s1">&#39;
</span><span class="s1">&gt; 3b start
</span><span class="s1">&gt; s/this is line/*/
</span><span class="s1">&gt; :start
</span><span class="s1">&gt; s/this is line/jump/
</span><span class="s1">&gt; &#39;</span> data.txt
* 1.
* 2.
jump 3.
* 4.
* 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="8-测试命令">8. 测试命令</h3>
<p>测试命令<code>t</code>会根据替换命令的结果，来决定是否跳转到某个标签。</p>
<p>如果没有指定标签，则跳转到命令结尾。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sed <span class="s1">&#39;
</span><span class="s1">&gt; s/line 3/*/
</span><span class="s1">&gt; t
</span><span class="s1">&gt; s/this is line/*/
</span><span class="s1">&gt; &#39;</span> data.txt
* 1.
* 2.
this is *.
* 4.
* 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="9-匹配模式">9. 匹配模式</h3>
<p><code>&amp;</code>符号代表替换命令中与模式匹配的文本。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ <span class="nb">echo</span> <span class="s2">&#34;The cat sleeps in his hat.&#34;</span> <span class="p">|</span> sed <span class="s1">&#39;s/.at/&#34;&amp;&#34;/g&#39;</span>
The <span class="s2">&#34;cat&#34;</span> sleeps in his <span class="s2">&#34;hat&#34;</span>.
</code></pre></td></tr></table>
</div>
</div><p>也可以提取某个被匹配项。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ <span class="nb">echo</span> <span class="s2">&#34;That furry cat is pretty&#34;</span> <span class="p">|</span> sed <span class="s1">&#39;s/furry \(.at\)/\1/&#39;</span>
That cat is pretty
</code></pre></td></tr></table>
</div>
</div><h2 id="sed-示例">sed 示例</h2>
<h3 id="1-反序输出文本">1. 反序输出文本</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.
this is line 2.
this is line 3.
this is line 4.
this is line 5.

<span class="c1"># tac命令可以反序输出</span>
$ tac data.txt
this is line 5.
this is line 4.
this is line 3.
this is line 2.
this is line 1.

<span class="c1"># sed也可以反序输出</span>
$ sed -n <span class="s1">&#39;1!G; h; $p&#39;</span> data.txt
this is line 5.
this is line 4.
this is line 3.
this is line 2.
this is line 1.
</code></pre></td></tr></table>
</div>
</div><h3 id="2-加倍行距">2. 加倍行距</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.
this is line 2.
this is line 3.

this is line 4.
this is line 5.
$ sed <span class="s1">&#39;/^$/d;$!G&#39;</span> data.txt
this is line 1.

this is line 2.

this is line 3.

this is line 4.

this is line 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="3-给文件的行编号">3. 给文件的行编号</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ nl data.txt
     1	this is line 1.
     2	this is line 2.
     3	this is line 3.

     4	this is line 4.
     5	this is line 5.

$ cat -n data.txt
     1	this is line 1.
     2	this is line 2.
     3	this is line 3.
     <span class="m">4</span>
     5	this is line 4.
     6	this is line 5.

$ sed <span class="s1">&#39;=&#39;</span> data.txt <span class="p">|</span> sed <span class="s1">&#39;N; s/\n/ /&#39;</span>
<span class="m">1</span> this is line 1.
<span class="m">2</span> this is line 2.
<span class="m">3</span> this is line 3.
<span class="m">4</span>
<span class="m">5</span> this is line 4.
<span class="m">6</span> this is line 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="4-打印末尾行">4. 打印末尾行</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 打印最后10行</span>
$ sed <span class="s1">&#39;:start; N; 11,$D; b start&#39;</span> data.txt
this is line 5.
this is line 6.
this is line 7.
this is line 8.
this is line 9.
this is line 10.
this is line 11.
this is line 12.
this is line 13.
this is line 14.
</code></pre></td></tr></table>
</div>
</div><h3 id="5-删除文本中的连续空白行">5. 删除文本中的连续空白行</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.


this is line 2.
this is line 3.
this is line 4.


this is line 5.
$ sed <span class="s1">&#39;/./,/^$/!d&#39;</span> data.txt
this is line 1.

this is line 2.
this is line 3.
this is line 4.

this is line 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="6-删除开头空白行">6. 删除开头空白行</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt



this is line 1.
this is line 2.
this is line 3.
this is line 4.
this is line 5.
$ sed <span class="s1">&#39;/./,$!d&#39;</span> data.txt
this is line 1.
this is line 2.
this is line 3.
this is line 4.
this is line 5.
</code></pre></td></tr></table>
</div>
</div><h3 id="7-删除结尾空白行">7. 删除结尾空白行</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ cat data.txt
this is line 1.
this is line 2.
this is line 3.
this is line 4.

this is line 5.



$ sed <span class="s1">&#39;:start; /^\n*$/{$d; N; b start}&#39;</span> data.txt

this is line 1.
this is line 2.
this is line 3.
this is line 4.

this is line 5.
</code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2020-10-05</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/linux/">Linux</a>,&nbsp;<a href="/tags/sed/">sed</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/mysql-optimizer/" class="prev" rel="prev" title="【MySQL】优化"><i class="fas fa-angle-left fa-fw"></i>【MySQL】优化</a>
            <a href="/linux-ya-suo-he-gui-dang/" class="next" rel="next" title="【Linux】压缩和归档">【Linux】压缩和归档<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">damion</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script type="text/javascript" src="/lib/gitalk/gitalk.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":30},"comment":{"gitalk":{"admin":[""],"clientID":"","clientSecret":"","id":"2020-10-05T17:52:47+08:00","owner":"","repo":"","title":"【Linux】sed命令详解"}},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
